<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MorbidiSense - Advanced Health Assessment</title>
    <link rel="stylesheet" href="../style/core.css">
    <!-- Load Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Load navigation scripts -->
    <script src="../scripts/navigation.js" defer></script>
    <script src="../scripts/loadTemplates.js" defer></script>
    <script src="../scripts/multi-step-form.js" defer></script>
</head>
<body class="advanced-assessment">
    <!-- Header will be loaded here -->
    <div id="header-placeholder"></div>

    <!-- Sidebar will be loaded here -->
    <div id="sidebar-placeholder"></div>
    
    <!-- Page transition overlay -->
    <div id="page-transition" class="page-transition">
        <div class="loader"></div>
    </div>

    <div class="main-content">
        <div class="form-container">
            <h1>Advanced Health Assessment</h1>
            
            <!-- Progress Steps -->
            <div class="form-steps">
                <div class="step" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Personal Info</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Lifestyle</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Medical History</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Vital Signs</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">Current Symptoms</div>
                </div>
                <div class="step" data-step="6">
                    <div class="step-number">6</div>
                    <div class="step-label">Review</div>
                </div>
            </div>
            
            <form id="advancedHealthForm">
                <!-- Step 1: Personal Information -->
                <div id="step-1" class="form-step">
                    <h2>Personal Information</h2>
                    <p class="form-intro">Please provide your basic personal information to get started with your health assessment.</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="firstName">First Name <span class="required">*</span></label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName">Last Name <span class="required">*</span></label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" placeholder="+1 (___) ___-____">
                        </div>
                        
                        <div class="form-group">
                            <label for="age">Age <span class="required">*</span></label>
                            <input type="number" id="age" name="age" min="18" max="120" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="gender">Gender <span class="required">*</span></label>
                            <select id="gender" name="gender" required>
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other / Prefer not to say</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-outline btn-prev" disabled>Previous</button>
                        <button type="button" class="btn btn-primary btn-next">Next: Lifestyle</button>
                    </div>
                </div>
                
                <!-- Step 2: Lifestyle -->
                <div id="step-2" class="form-step">
                    <h2>Lifestyle & Habits</h2>
                    <p class="form-intro">Help us understand your daily habits and lifestyle factors that may impact your health.</p>
                    
                    <div class="form-group">
                        <label>Smoking Status</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="smoking" value="never" checked> Never smoked
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="smoking" value="former"> Former smoker
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="smoking" value="current"> Current smoker
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Alcohol Consumption</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="alcohol" value="none" checked> None
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="alcohol" value="occasional"> Occasional (1-4 drinks/month)
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="alcohol" value="moderate"> Moderate (2-7 drinks/week)
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="alcohol" value="heavy"> Heavy (8+ drinks/week)
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="activityLevel">Physical Activity Level</label>
                        <select id="activityLevel" name="activityLevel">
                            <option value="sedentary">Sedentary (little or no exercise)</option>
                            <option value="light" selected>Lightly active (light exercise/sports 1-3 days/week)</option>
                            <option value="moderate">Moderately active (moderate exercise/sports 3-5 days/week)</option>
                            <option value="very">Very active (hard exercise/sports 6-7 days a week)</option>
                            <option value="extra">Extra active (very hard exercise/sports & physical job or 2x training)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="diet">Typical Diet</label>
                        <select id="diet" name="diet">
                            <option value="balanced">Balanced (mix of all food groups)</option>
                            <option value="vegetarian">Vegetarian</option>
                            <option value="vegan">Vegan</option>
                            <option value="lowCarb">Low-Carb/Keto</option>
                            <option value="mediterranean">Mediterranean</option>
                            <option value="processed">High in processed foods</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sleepHours">Average Hours of Sleep per Night</label>
                        <input type="number" id="sleepHours" name="sleepHours" min="0" max="24" step="0.5" value="7">
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-outline btn-prev">Previous</button>
                        <button type="button" class="btn btn-primary btn-next">Next: Medical History</button>
                    </div>
                </div>
                
                <!-- Step 3: Medical History -->
                <div id="step-3" class="form-step">
                    <h2>Medical History</h2>
                    <p class="form-intro">Please provide information about your medical history and any existing conditions.</p>
                    
                    <div class="form-group">
                        <label>Existing Medical Conditions (check all that apply)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="hypertension"> High Blood Pressure
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="diabetes"> Diabetes
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="heartDisease"> Heart Disease
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="highCholesterol"> High Cholesterol
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="asthma"> Asthma/COPD
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="arthritis"> Arthritis
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="depression"> Depression/Anxiety
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="cancer"> Cancer
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="conditions" value="none" id="noConditions"> None of the above
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="allergies">Allergies (medications, food, environmental)</label>
                        <input type="text" id="allergies" name="allergies" placeholder="List any known allergies">
                    </div>
                    
                    <div class="form-group">
                        <label for="medications">Current Medications</label>
                        <textarea id="medications" name="medications" placeholder="List all current medications and dosages"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Family Medical History (check all that apply)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="familyHistory" value="heartDisease"> Heart Disease
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="familyHistory" value="diabetes"> Diabetes
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="familyHistory" value="cancer"> Cancer
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="familyHistory" value="stroke"> Stroke
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="familyHistory" value="alzheimers"> Alzheimer's/Dementia
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="familyHistory" value="none" id="noFamilyHistory"> None known
                            </label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-outline btn-prev">Previous</button>
                        <button type="button" class="btn btn-primary btn-next">Next: Vital Signs</button>
                    </div>
                </div>
                
                <!-- Step 4: Vital Signs -->
                <div id="step-4" class="form-step">
                    <h2>Vital Signs & Measurements</h2>
                    <p class="form-intro">Please provide your most recent health measurements if known.</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="height">Height</label>
                            <div class="input-group">
                                <input type="number" id="height" name="height" placeholder="cm" min="100" max="250">
                                <span>cm</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="weight">Weight</label>
                            <div class="input-group">
                                <input type="number" id="weight" name="weight" placeholder="kg" min="30" max="300" step="0.1">
                                <span>kg</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="systolic">Blood Pressure</label>
                            <div class="blood-pressure">
                                <input type="number" id="systolic" name="systolic" placeholder="Systolic" min="70" max="200">
                                <span>/</span>
                                <input type="number" id="diastolic" name="diastolic" placeholder="Diastolic" min="40" max="120">
                                <span>mmHg</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="heartRate">Resting Heart Rate</label>
                            <div class="input-group">
                                <input type="number" id="heartRate" name="heartRate" min="30" max="200">
                                <span>bpm</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastCheckup">Date of Last Medical Checkup</label>
                        <input type="date" id="lastCheckup" name="lastCheckup">
                    </div>
                    
                    <div class="form-group">
                        <label for="recentTests">Recent Medical Tests or Procedures</label>
                        <textarea id="recentTests" name="recentTests" placeholder="List any recent medical tests, procedures, or hospitalizations"></textarea>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-outline btn-prev">Previous</button>
                        <button type="button" class="btn btn-primary btn-next">Next: Review</button>
                    </div>
                </div>
                
                <!-- Step 5: Current Symptoms -->
                <div id="step-5" class="form-step">
                    <h2>Current Symptoms</h2>
                    <p class="form-intro">Please provide details about any current symptoms you're experiencing.</p>
                    
                    <!-- Fever Section -->
                    <div class="symptom-section">
                        <h3>Fever</h3>
                        <div class="form-group">
                            <label>Do you currently have a fever? <span class="required">*</span></label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="hasFever" value="yes" required> Yes
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="hasFever" value="no" required> No
                                </label>
                            </div>
                        </div>
                        
                        <div id="fever-details" class="symptom-details" style="display: none;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="feverDuration">Duration (days) <span class="required">*</span></label>
                                    <div class="input-group">
                                        <input type="number" id="feverDuration" name="feverDuration" min="0.1" step="0.1" placeholder="e.g. 2.5" required>
                                        <span>days</span>
                                    </div>
                                    <small class="input-hint">Must be greater than 0</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="temperature">Temperature <span class="required">*</span></label>
                                    <div class="input-group">
                                        <input type="number" id="temperature" name="temperature" min="35" max="42" step="0.1" placeholder="e.g. 38.5" required>
                                        <div class="temp-unit-toggle">
                                            <span class="temp-unit active" data-unit="C">°C</span>
                                            <span class="temp-unit" data-unit="F">°F</span>
                                            <input type="hidden" id="tempUnit" name="tempUnit" value="C">
                                        </div>
                                    </div>
                                    <small class="input-hint">Normal range: 35-42°C / 95-107.6°F</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="feverPattern">Fever Pattern <span class="required">*</span></label>
                                    <select id="feverPattern" name="feverPattern" required>
                                        <option value="">Select pattern</option>
                                        <option value="continuous">Continuous</option>
                                        <option value="intermittent">Intermittent</option>
                                        <option value="remittent">Remittent</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Associated Symptoms <span class="required">*</span></label>
                                <div class="checkbox-grid">
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="feverSymptoms" value="chills"> Chills
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="feverSymptoms" value="sweating"> Sweating
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="feverSymptoms" value="bodyAches"> Body Aches
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="feverSymptoms" value="none" id="noFeverSymptoms"> None
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Headache Section -->
                    <div class="symptom-section" style="margin-top: 2rem;">
                        <h3>Headache</h3>
                        <div class="form-group">
                            <label>Do you experience headaches? <span class="required">*</span></label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="hasHeadache" value="yes" required> Yes
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="hasHeadache" value="no" required> No
                                </label>
                            </div>
                        </div>
                        
                        <div id="headache-details" class="symptom-details" style="display: none;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="headacheDuration">Duration <span class="required">*</span></label>
                                    <div class="input-group">
                                        <input type="number" id="headacheDuration" name="headacheDuration" min="0.1" step="0.1" placeholder="e.g. 3" required>
                                        <span>weeks</span>
                                    </div>
                                    <small class="input-hint">Must be greater than 0</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="headacheFrequency">Frequency <span class="required">*</span></label>
                                    <select id="headacheFrequency" name="headacheFrequency" required>
                                        <option value="">Select frequency</option>
                                        <option value="occasional">Occasional</option>
                                        <option value="frequent">Frequent</option>
                                        <option value="daily">Daily</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>Location <span class="required">*</span></label>
                                    <div class="checkbox-grid">
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="headacheLocation" value="frontal"> Frontal
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="headacheLocation" value="temporal"> Temporal
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="headacheLocation" value="occipital"> Occipital
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" name="headacheLocation" value="generalized"> Generalized
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="headacheSeverity">Severity <span class="required">*</span></label>
                                    <div class="severity-slider">
                                        <div class="slider-labels">
                                            <span>0 (Mild)</span>
                                            <span>10 (Severe)</span>
                                        </div>
                                        <input type="range" id="headacheSeverity" name="headacheSeverity" min="0" max="10" value="5" step="1" required>
                                        <div class="slider-value">5</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Associated Symptoms <span class="required">*</span></label>
                                <div class="checkbox-grid">
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="headacheSymptoms" value="nausea"> Nausea
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="headacheSymptoms" value="visualDisturbances"> Visual Disturbances
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="headacheSymptoms" value="lightSensitivity"> Sensitivity to Light
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="headacheSymptoms" value="none" id="noHeadacheSymptoms"> None
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Family history of migraine? <span class="required">*</span></label>
                                <div class="radio-group">
                                    <label class="radio-item">
                                        <input type="radio" name="migraineFamilyHistory" value="yes" required> Yes
                                    </label>
                                    <label class="radio-item">
                                        <input type="radio" name="migraineFamilyHistory" value="no" required> No
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-outline btn-prev">Previous</button>
                        <button type="button" class="btn btn-primary btn-next">Next: Review</button>
                    </div>
                </div>
                
                <!-- Step 6: Review & Submit -->
                <div id="step-6" class="form-step">
                    <h2>Review Your Information</h2>
                    <p class="form-intro">Please review all the information you've provided before submitting your health assessment.</p>
                    
                    <div class="review-summary" id="review-summary">
                        <!-- Summary will be populated by JavaScript -->
                        <div class="text-center" style="padding: 2rem; color: var(--gray-500);">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>Loading your information...</p>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalNotes">Additional Notes or Comments</label>
                        <textarea id="additionalNotes" name="additionalNotes" placeholder="Is there anything else you'd like to share with your healthcare provider?"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="consent" name="consent" required>
                            <label for="consent">
                                I confirm that the information provided is accurate to the best of my knowledge. 
                                I understand that this is not a substitute for professional medical advice, diagnosis, or treatment.
                                <span class="required">*</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-outline btn-prev">Previous</button>
                        <button type="button" class="btn btn-primary btn-submit">
                            <i class="fas fa-paper-plane"></i> Submit Assessment
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 MorbidiSense. All rights reserved. | <a href="#" data-route="privacy">Privacy Policy</a> | <a href="#" data-route="terms">Terms of Service</a></p>
        </footer>
    </div>
    
    <script>
        // Handle the "None" checkboxes and conditional fields
        document.addEventListener('DOMContentLoaded', function() {
            // For medical conditions
            const noConditions = document.getElementById('noConditions');
            const conditionCheckboxes = document.querySelectorAll('input[name="conditions"]:not(#noConditions)');
            
            noConditions.addEventListener('change', function() {
                if (this.checked) {
                    conditionCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                }
            });
            
            conditionCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        noConditions.checked = false;
                    }
                });
            });
            
            // For family history
            const noFamilyHistory = document.getElementById('noFamilyHistory');
            const familyHistoryCheckboxes = document.querySelectorAll('input[name="familyHistory"]:not(#noFamilyHistory)');
            
            noFamilyHistory.addEventListener('change', function() {
                if (this.checked) {
                    familyHistoryCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                }
            });
            
            familyHistoryCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        noFamilyHistory.checked = false;
                    }
                });
            });
            
            // For fever symptoms
            const noFeverSymptoms = document.getElementById('noFeverSymptoms');
            const feverSymptomCheckboxes = document.querySelectorAll('input[name="feverSymptoms"]:not(#noFeverSymptoms)');
            
            noFeverSymptoms.addEventListener('change', function() {
                if (this.checked) {
                    feverSymptomCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                }
            });
            
            feverSymptomCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        noFeverSymptoms.checked = false;
                    }
                });
            });
            
            // For headache symptoms
            const noHeadacheSymptoms = document.getElementById('noHeadacheSymptoms');
            const headacheSymptomCheckboxes = document.querySelectorAll('input[name="headacheSymptoms"]:not(#noHeadacheSymptoms)');
            
            noHeadacheSymptoms.addEventListener('change', function() {
                if (this.checked) {
                    headacheSymptomCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                }
            });
            
            headacheSymptomCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        noHeadacheSymptoms.checked = false;
                    }
                });
            });
            
            // Toggle fever details
            const feverRadios = document.querySelectorAll('input[name="hasFever"]');
            const feverDetails = document.getElementById('fever-details');
            
            feverRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        feverDetails.style.display = 'block';
                    } else {
                        feverDetails.style.display = 'none';
                        // Clear required fields when hidden
                        const requiredFields = feverDetails.querySelectorAll('[required]');
                        requiredFields.forEach(field => {
                            field.required = false;
                        });
                    }
                });
            });
            
            // Toggle headache details
            const headacheRadios = document.querySelectorAll('input[name="hasHeadache"]');
            const headacheDetails = document.getElementById('headache-details');
            
            headacheRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        headacheDetails.style.display = 'block';
                        // Add required attribute to all required fields
                        const requiredFields = headacheDetails.querySelectorAll('[required]');
                        requiredFields.forEach(field => {
                            field.required = true;
                        });
                    } else {
                        headacheDetails.style.display = 'none';
                        // Clear required fields when hidden
                        const requiredFields = headacheDetails.querySelectorAll('[required]');
                        requiredFields.forEach(field => {
                            field.required = false;
                            field.value = '';
                        });
                        // Uncheck checkboxes
                        headacheDetails.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                            cb.checked = false;
                        });
                        // Reset slider
                        const severitySlider = document.getElementById('headacheSeverity');
                        if (severitySlider) {
                            severitySlider.value = 5;
                            severitySlider.nextElementSibling.textContent = '5';
                        }
                    }
                });
            });
            
            // Temperature unit toggle
            const tempUnits = document.querySelectorAll('.temp-unit');
            const tempInput = document.getElementById('temperature');
            const tempUnitInput = document.getElementById('tempUnit');
            
            tempUnits.forEach(unit => {
                unit.addEventListener('click', function() {
                    if (this.classList.contains('active')) return;
                    
                    const currentValue = parseFloat(tempInput.value);
                    if (isNaN(currentValue)) return;
                    
                    if (this.dataset.unit === 'F' && tempUnitInput.value === 'C') {
                        // Convert C to F: (C × 9/5) + 32
                        const fahrenheit = (currentValue * 9/5) + 32;
                        tempInput.value = fahrenheit.toFixed(1);
                        tempUnitInput.value = 'F';
                    } else if (this.dataset.unit === 'C' && tempUnitInput.value === 'F') {
                        // Convert F to C: (F - 32) × 5/9
                        const celsius = (currentValue - 32) * 5/9;
                        tempInput.value = celsius.toFixed(1);
                        tempUnitInput.value = 'C';
                    }
                    
                    // Update active state
                    tempUnits.forEach(u => u.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Update slider value display
            const severitySlider = document.getElementById('headacheSeverity');
            if (severitySlider) {
                severitySlider.addEventListener('input', function() {
                    this.nextElementSibling.textContent = this.value;
                });
            }
        });
    </script>
</body>
</html>